/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/@coreui/coreui@3.0.0/js/src/modal.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{getjQuery,TRANSITION_END,emulateTransitionEnd,getElementFromSelector,getTransitionDurationFromElement,isVisible,makeArray,reflow,typeCheckConfig}from"./util/index";import Data from"./dom/data";import EventHandler from"./dom/event-handler";import Manipulator from"./dom/manipulator";import SelectorEngine from"./dom/selector-engine";const NAME="modal",VERSION="3.0.0",DATA_KEY="coreui.modal",EVENT_KEY=`.${DATA_KEY}`,DATA_API_KEY=".data-api",ESCAPE_KEYCODE=27,Default={backdrop:!0,keyboard:!0,focus:!0,show:!0},DefaultType={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Event={HIDE:`hide${EVENT_KEY}`,HIDE_PREVENTED:`hidePrevented${EVENT_KEY}`,HIDDEN:`hidden${EVENT_KEY}`,SHOW:`show${EVENT_KEY}`,SHOWN:`shown${EVENT_KEY}`,FOCUSIN:`focusin${EVENT_KEY}`,RESIZE:`resize${EVENT_KEY}`,CLICK_DISMISS:`click.dismiss${EVENT_KEY}`,KEYDOWN_DISMISS:`keydown.dismiss${EVENT_KEY}`,MOUSEUP_DISMISS:`mouseup.dismiss${EVENT_KEY}`,MOUSEDOWN_DISMISS:`mousedown.dismiss${EVENT_KEY}`,CLICK_DATA_API:`click${EVENT_KEY}.data-api`},ClassName={SCROLLABLE:"modal-dialog-scrollable",SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show",STATIC:"modal-static"},Selector={DIALOG:".modal-dialog",MODAL_BODY:".modal-body",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"};class Modal{constructor(t,e){this._config=this._getConfig(e),this._element=t,this._dialog=SelectorEngine.findOne(Selector.DIALOG,t),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0,Data.setData(t,DATA_KEY,this)}static get VERSION(){return VERSION}static get Default(){return Default}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;this._element.classList.contains(ClassName.FADE)&&(this._isTransitioning=!0);const e=EventHandler.trigger(this._element,Event.SHOW,{relatedTarget:t});this._isShown||e.defaultPrevented||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),EventHandler.on(this._element,Event.CLICK_DISMISS,Selector.DATA_DISMISS,t=>this.hide(t)),EventHandler.on(this._dialog,Event.MOUSEDOWN_DISMISS,()=>{EventHandler.one(this._element,Event.MOUSEUP_DISMISS,t=>{t.target===this._element&&(this._ignoreBackdropClick=!0)})}),this._showBackdrop(()=>this._showElement(t)))}hide(t){if(t&&t.preventDefault(),!this._isShown||this._isTransitioning)return;if(EventHandler.trigger(this._element,Event.HIDE).defaultPrevented)return;this._isShown=!1;const e=this._element.classList.contains(ClassName.FADE);if(e&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),EventHandler.off(document,Event.FOCUSIN),this._element.classList.remove(ClassName.SHOW),EventHandler.off(this._element,Event.CLICK_DISMISS),EventHandler.off(this._dialog,Event.MOUSEDOWN_DISMISS),e){const t=getTransitionDurationFromElement(this._element);EventHandler.one(this._element,TRANSITION_END,t=>this._hideModal(t)),emulateTransitionEnd(this._element,t)}else this._hideModal()}dispose(){[window,this._element,this._dialog].forEach(t=>EventHandler.off(t,EVENT_KEY)),EventHandler.off(document,Event.FOCUSIN),Data.removeData(this._element,DATA_KEY),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null}handleUpdate(){this._adjustDialog()}_getConfig(t){return t={...Default,...t},typeCheckConfig(NAME,t,DefaultType),t}_showElement(t){const e=this._element.classList.contains(ClassName.FADE),i=SelectorEngine.findOne(Selector.MODAL_BODY,this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._dialog.classList.contains(ClassName.SCROLLABLE)&&i?i.scrollTop=0:this._element.scrollTop=0,e&&reflow(this._element),this._element.classList.add(ClassName.SHOW),this._config.focus&&this._enforceFocus();const n=()=>{this._config.focus&&this._element.focus(),this._isTransitioning=!1,EventHandler.trigger(this._element,Event.SHOWN,{relatedTarget:t})};if(e){const t=getTransitionDurationFromElement(this._dialog);EventHandler.one(this._dialog,TRANSITION_END,n),emulateTransitionEnd(this._dialog,t)}else n()}_enforceFocus(){EventHandler.off(document,Event.FOCUSIN),EventHandler.on(document,Event.FOCUSIN,t=>{document===t.target||this._element===t.target||this._element.contains(t.target)||this._element.focus()})}_setEscapeEvent(){this._isShown&&this._config.keyboard?EventHandler.on(this._element,Event.KEYDOWN_DISMISS,t=>{t.which===ESCAPE_KEYCODE&&this._triggerBackdropTransition()}):EventHandler.off(this._element,Event.KEYDOWN_DISMISS)}_setResizeEvent(){this._isShown?EventHandler.on(window,Event.RESIZE,()=>this._adjustDialog()):EventHandler.off(window,Event.RESIZE)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._isTransitioning=!1,this._showBackdrop(()=>{document.body.classList.remove(ClassName.OPEN),this._resetAdjustments(),this._resetScrollbar(),EventHandler.trigger(this._element,Event.HIDDEN)})}_removeBackdrop(){this._backdrop.parentNode.removeChild(this._backdrop),this._backdrop=null}_showBackdrop(t){const e=this._element.classList.contains(ClassName.FADE)?ClassName.FADE:"";if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className=ClassName.BACKDROP,e&&this._backdrop.classList.add(e),document.body.appendChild(this._backdrop),EventHandler.on(this._element,Event.CLICK_DISMISS,t=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:t.target===t.currentTarget&&this._triggerBackdropTransition()}),e&&reflow(this._backdrop),this._backdrop.classList.add(ClassName.SHOW),!e)return void t();const i=getTransitionDurationFromElement(this._backdrop);EventHandler.one(this._backdrop,TRANSITION_END,t),emulateTransitionEnd(this._backdrop,i)}else if(!this._isShown&&this._backdrop){this._backdrop.classList.remove(ClassName.SHOW);const e=()=>{this._removeBackdrop(),t()};if(this._element.classList.contains(ClassName.FADE)){const t=getTransitionDurationFromElement(this._backdrop);EventHandler.one(this._backdrop,TRANSITION_END,e),emulateTransitionEnd(this._backdrop,t)}else e()}else t()}_triggerBackdropTransition(){if("static"===this._config.backdrop){if(EventHandler.trigger(this._element,Event.HIDE_PREVENTED).defaultPrevented)return;this._element.classList.add(ClassName.STATIC);const t=getTransitionDurationFromElement(this._element);EventHandler.one(this._element,TRANSITION_END,()=>{this._element.classList.remove(ClassName.STATIC)}),emulateTransitionEnd(this._element,t),this._element.focus()}else this.hide()}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=`${this._scrollbarWidth}px`),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=`${this._scrollbarWidth}px`)}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}_checkScrollbar(){const t=document.body.getBoundingClientRect();this._isBodyOverflowing=t.left+t.right<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()}_setScrollbar(){if(this._isBodyOverflowing){makeArray(SelectorEngine.find(Selector.FIXED_CONTENT)).forEach(t=>{const e=t.style.paddingRight,i=window.getComputedStyle(t)["padding-right"];Manipulator.setDataAttribute(t,"padding-right",e),t.style.paddingRight=`${parseFloat(i)+this._scrollbarWidth}px`}),makeArray(SelectorEngine.find(Selector.STICKY_CONTENT)).forEach(t=>{const e=t.style.marginRight,i=window.getComputedStyle(t)["margin-right"];Manipulator.setDataAttribute(t,"margin-right",e),t.style.marginRight=`${parseFloat(i)-this._scrollbarWidth}px`});const t=document.body.style.paddingRight,e=window.getComputedStyle(document.body)["padding-right"];Manipulator.setDataAttribute(document.body,"padding-right",t),document.body.style.paddingRight=`${parseFloat(e)+this._scrollbarWidth}px`}document.body.classList.add(ClassName.OPEN)}_resetScrollbar(){makeArray(SelectorEngine.find(Selector.FIXED_CONTENT)).forEach(t=>{const e=Manipulator.getDataAttribute(t,"padding-right");void 0!==e&&(Manipulator.removeDataAttribute(t,"padding-right"),t.style.paddingRight=e)}),makeArray(SelectorEngine.find(`${Selector.STICKY_CONTENT}`)).forEach(t=>{const e=Manipulator.getDataAttribute(t,"margin-right");void 0!==e&&(Manipulator.removeDataAttribute(t,"margin-right"),t.style.marginRight=e)});const t=Manipulator.getDataAttribute(document.body,"padding-right");void 0===t?document.body.style.paddingRight="":(Manipulator.removeDataAttribute(document.body,"padding-right"),document.body.style.paddingRight=t)}_getScrollbarWidth(){const t=document.createElement("div");t.className=ClassName.SCROLLBAR_MEASURER,document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e}static jQueryInterface(t,e){return this.each(function(){let i=Data.getData(this,DATA_KEY);const n={...Default,...Manipulator.getDataAttributes(this),..."object"==typeof t&&t?t:{}};if(i||(i=new Modal(this,n)),"string"==typeof t){if(void 0===i[t])throw new TypeError(`No method named "${t}"`);i[t](e)}else n.show&&i.show(e)})}static getInstance(t){return Data.getData(t,DATA_KEY)}}EventHandler.on(document,Event.CLICK_DATA_API,Selector.DATA_TOGGLE,function(t){const e=getElementFromSelector(this);"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault(),EventHandler.one(e,Event.SHOW,t=>{t.defaultPrevented||EventHandler.one(e,Event.HIDDEN,()=>{isVisible(this)&&this.focus()})});let i=Data.getData(e,DATA_KEY);if(!i){const t={...Manipulator.getDataAttributes(e),...Manipulator.getDataAttributes(this)};i=new Modal(e,t)}i.show(this)});const $=getjQuery();if($){const t=$.fn[NAME];$.fn[NAME]=Modal.jQueryInterface,$.fn[NAME].Constructor=Modal,$.fn[NAME].noConflict=(()=>($.fn[NAME]=t,Modal.jQueryInterface))}export default Modal;
//# sourceMappingURL=/sm/ab1dec5e0729e4cd0088cac8236cd5c48c0c161b363e830a980f42612d1c3d48.map