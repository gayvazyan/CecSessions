/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/@coreui/coreui@3.0.0/js/src/dropdown.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{getjQuery,getElementFromSelector,isElement,isVisible,makeArray,noop,typeCheckConfig}from"./util/index";import Data from"./dom/data";import EventHandler from"./dom/event-handler";import Manipulator from"./dom/manipulator";import{createPopper}from"@popperjs/core";import SelectorEngine from"./dom/selector-engine";const NAME="dropdown",VERSION="3.0.0",DATA_KEY="coreui.dropdown",EVENT_KEY=`.${DATA_KEY}`,DATA_API_KEY=".data-api",ESCAPE_KEYCODE=27,SPACE_KEYCODE=32,TAB_KEYCODE=9,ARROW_UP_KEYCODE=38,ARROW_DOWN_KEYCODE=40,RIGHT_MOUSE_BUTTON_WHICH=3,REGEXP_KEYDOWN=new RegExp(`${ARROW_UP_KEYCODE}|${ARROW_DOWN_KEYCODE}|${ESCAPE_KEYCODE}`),Event={HIDE:`hide${EVENT_KEY}`,HIDDEN:`hidden${EVENT_KEY}`,SHOW:`show${EVENT_KEY}`,SHOWN:`shown${EVENT_KEY}`,CLICK:`click${EVENT_KEY}`,CLICK_DATA_API:`click${EVENT_KEY}.data-api`,KEYDOWN_DATA_API:`keydown${EVENT_KEY}.data-api`,KEYUP_DATA_API:`keyup${EVENT_KEY}.data-api`},ClassName={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",POSITION_STATIC:"position-static"},Selector={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",HEADER_NAV:".c-header-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"},AttachmentMap={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"},Default={offset:[0,0],flip:!0,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},DefaultType={offset:"(array|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"};class Dropdown{constructor(e,t){this._element=e,this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._inHeader=this._detectHeader(),this._addEventListeners(),Data.setData(e,DATA_KEY,this)}static get VERSION(){return VERSION}static get Default(){return Default}static get DefaultType(){return DefaultType}toggle(){if(this._element.disabled||this._element.classList.contains(ClassName.DISABLED))return;const e=this._menu.classList.contains(ClassName.SHOW);Dropdown.clearMenus(),e||this.show()}show(){if(this._element.disabled||this._element.classList.contains(ClassName.DISABLED)||this._menu.classList.contains(ClassName.SHOW))return;const e=Dropdown.getParentFromElement(this._element),t={relatedTarget:this._element};if(!EventHandler.trigger(e,Event.SHOW,t).defaultPrevented){if(!this._inNavbar&&!this._inHeader){if(void 0===createPopper)throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=e:isElement(this._config.reference)&&(t=this._config.reference,void 0!==this._config.reference.jquery&&(t=this._config.reference[0])),"scrollParent"!==this._config.boundary&&e.classList.add(ClassName.POSITION_STATIC),this._popper=createPopper(t,this._menu,this._getPopperConfig())}"ontouchstart"in document.documentElement&&!makeArray(SelectorEngine.closest(e,Selector.NAVBAR_NAV)).length&&makeArray(document.body.children).forEach(e=>EventHandler.on(e,"mouseover",null,noop())),"ontouchstart"in document.documentElement&&!makeArray(SelectorEngine.closest(e,Selector.HEADER_NAV)).length&&makeArray(document.body.children).forEach(e=>EventHandler.on(e,"mouseover",null,noop())),this._element.focus(),this._element.setAttribute("aria-expanded",!0),Manipulator.toggleClass(this._menu,ClassName.SHOW),Manipulator.toggleClass(e,ClassName.SHOW),EventHandler.trigger(e,Event.SHOWN,t)}}hide(){if(this._element.disabled||this._element.classList.contains(ClassName.DISABLED)||!this._menu.classList.contains(ClassName.SHOW))return;const e=Dropdown.getParentFromElement(this._element),t={relatedTarget:this._element};EventHandler.trigger(e,Event.HIDE,t).defaultPrevented||(this._popper&&this._popper.destroy(),Manipulator.toggleClass(this._menu,ClassName.SHOW),Manipulator.toggleClass(e,ClassName.SHOW),EventHandler.trigger(e,Event.HIDDEN,t))}dispose(){Data.removeData(this._element,DATA_KEY),EventHandler.off(this._element,EVENT_KEY),this._element=null,this._menu=null,this._popper&&(this._popper.destroy(),this._popper=null)}update(){this._inNavbar=this._detectNavbar(),this._inHeader=this._detectHeader(),this._popper&&this._popper.scheduleUpdate()}_addEventListeners(){EventHandler.on(this._element,Event.CLICK,e=>{e.preventDefault(),e.stopPropagation(),this.toggle()})}_getConfig(e){return e={...this.constructor.Default,...Manipulator.getDataAttributes(this._element),...e},typeCheckConfig(NAME,e,this.constructor.DefaultType),e}_getMenuElement(){const e=Dropdown.getParentFromElement(this._element);return SelectorEngine.findOne(Selector.MENU,e)}_getPlacement(){const e=this._element.parentNode;let t=AttachmentMap.BOTTOM;return e.classList.contains(ClassName.DROPUP)?(t=AttachmentMap.TOP,this._menu.classList.contains(ClassName.MENURIGHT)&&(t=AttachmentMap.TOPEND)):e.classList.contains(ClassName.DROPRIGHT)?t=AttachmentMap.RIGHT:e.classList.contains(ClassName.DROPLEFT)?t=AttachmentMap.LEFT:this._menu.classList.contains(ClassName.MENURIGHT)&&(t=AttachmentMap.BOTTOMEND),t}_detectNavbar(){return Boolean(SelectorEngine.closest(this._element,".navbar"))}_detectHeader(){return Boolean(SelectorEngine.closest(this._element,".c-header"))}_getOffset(){const e=[];return"function"==typeof this._config.offset?e.fn=(e=>(e.offsets={...e.offsets,...this._config.offset(e.offsets,this._element)||{}},e)):e.offset=this._config.offset,e}_getPopperConfig(){const e={placement:this._getPlacement(),modifiers:[{name:"offset",options:{offset:this._getOffset()}},{name:"flip",enabled:this._config.flip},{name:"preventOverflow",options:{boundary:this._config.boundary}}]};return"static"===this._config.display&&(e.modifiers.applyStyle={enabled:!1}),{...e,...this._config.popperConfig}}static dropdownInterface(e,t){let n=Data.getData(e,DATA_KEY);if(n||(n=new Dropdown(e,"object"==typeof t?t:null)),"string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}static jQueryInterface(e){return this.each(function(){Dropdown.dropdownInterface(this,e)})}static clearMenus(e){if(e&&(e.which===RIGHT_MOUSE_BUTTON_WHICH||"keyup"===e.type&&e.which!==TAB_KEYCODE))return;const t=makeArray(SelectorEngine.find(Selector.DATA_TOGGLE));for(let n=0,o=t.length;n<o;n++){const o=Dropdown.getParentFromElement(t[n]),r=Data.getData(t[n],DATA_KEY),a={relatedTarget:t[n]};if(e&&"click"===e.type&&(a.clickEvent=e),!r)continue;const s=r._menu;o.classList.contains(ClassName.SHOW)&&(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&e.which===TAB_KEYCODE)&&o.contains(e.target)||EventHandler.trigger(o,Event.HIDE,a).defaultPrevented||("ontouchstart"in document.documentElement&&makeArray(document.body.children).forEach(e=>EventHandler.off(e,"mouseover",null,noop())),t[n].setAttribute("aria-expanded","false"),r._popper&&r._popper.destroy(),s.classList.remove(ClassName.SHOW),o.classList.remove(ClassName.SHOW),EventHandler.trigger(o,Event.HIDDEN,a)))}}static getParentFromElement(e){return getElementFromSelector(e)||e.parentNode}static dataApiKeydownHandler(e){if(/input|textarea/i.test(e.target.tagName)?e.which===SPACE_KEYCODE||e.which!==ESCAPE_KEYCODE&&(e.which!==ARROW_DOWN_KEYCODE&&e.which!==ARROW_UP_KEYCODE||SelectorEngine.closest(e.target,Selector.MENU)):!REGEXP_KEYDOWN.test(e.which))return;if(e.preventDefault(),e.stopPropagation(),this.disabled||this.classList.contains(ClassName.DISABLED))return;const t=Dropdown.getParentFromElement(this),n=t.classList.contains(ClassName.SHOW);if(!n||n&&(e.which===ESCAPE_KEYCODE||e.which===SPACE_KEYCODE))return e.which===ESCAPE_KEYCODE&&SelectorEngine.findOne(Selector.DATA_TOGGLE,t).focus(),void Dropdown.clearMenus();const o=makeArray(SelectorEngine.find(Selector.VISIBLE_ITEMS,t)).filter(isVisible);if(!o.length)return;let r=o.indexOf(e.target);e.which===ARROW_UP_KEYCODE&&r>0&&r--,e.which===ARROW_DOWN_KEYCODE&&r<o.length-1&&r++,r<0&&(r=0),o[r].focus()}static getInstance(e){return Data.getData(e,DATA_KEY)}}EventHandler.on(document,Event.KEYDOWN_DATA_API,Selector.DATA_TOGGLE,Dropdown.dataApiKeydownHandler),EventHandler.on(document,Event.KEYDOWN_DATA_API,Selector.MENU,Dropdown.dataApiKeydownHandler),EventHandler.on(document,Event.CLICK_DATA_API,Dropdown.clearMenus),EventHandler.on(document,Event.KEYUP_DATA_API,Dropdown.clearMenus),EventHandler.on(document,Event.CLICK_DATA_API,Selector.DATA_TOGGLE,function(e){e.preventDefault(),e.stopPropagation(),Dropdown.dropdownInterface(this,"toggle")}),EventHandler.on(document,Event.CLICK_DATA_API,Selector.FORM_CHILD,e=>e.stopPropagation());const $=getjQuery();if($){const e=$.fn[NAME];$.fn[NAME]=Dropdown.jQueryInterface,$.fn[NAME].Constructor=Dropdown,$.fn[NAME].noConflict=(()=>($.fn[NAME]=e,Dropdown.jQueryInterface))}export default Dropdown;
//# sourceMappingURL=/sm/9eac8fc08b66a3a046686dbbd3db6c53cf608bb4b410c465c90bc97a2be7c4eb.map