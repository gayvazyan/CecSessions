/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/@coreui/coreui@3.0.0/js/src/async-load.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{getjQuery}from"./util/index";import Data from"./dom/data";import EventHandler from"./dom/event-handler";const NAME="asyncLoad",VERSION="3.0.0",DATA_KEY="coreui.asyncLoad",EVENT_KEY=`.${DATA_KEY}`,DATA_API_KEY=".data-api",ClassName={ACTIVE:"c-active",NAV_DROPDOWN_TOGGLE:"c-sidebar-nav-dropdown-toggle",SHOW:"c-show",VIEW_SCRIPT:"view-script"},Event={CLICK_DATA_API:`click${EVENT_KEY}.data-api`,XHR_STATUS:"xhr"},Selector={NAV_DROPDOWN:".c-sidebar-nav-dropdown",NAV_LINK:".c-xhr-link, .c-sidebar-nav-link",NAV_ITEM:".c-sidebar-nav-item",VIEW_SCRIPT:".view-script"},Default={defaultPage:"main.html",errorPage:"404.html",subpagesDirectory:"views/"};class AsyncLoad{constructor(e,t){this._config=this._getConfig(t),this._element=e;const a=location.hash.replace(/^#/,"");""!==a?this._setUpUrl(a):this._setUpUrl(this._config.defaultPage),this._addEventListeners()}static get VERSION(){return VERSION}static get Default(){return Default}_getConfig(e){return e={...Default,...e}}_loadPage(e){const t=this._element,a=this._config,r=(e,t=0)=>{const a=document.createElement("script");a.type="text/javascript",a.src=e[t],a.className=ClassName.VIEW_SCRIPT,a.onload=a.onreadystatechange=(()=>{this.readyState&&"complete"!==this.readyState||e.length>t+1&&r(e,t+1)}),document.getElementsByTagName("body")[0].appendChild(a)},o=new XMLHttpRequest;o.open("GET",a.subpagesDirectory+e);let s=new CustomEvent(Event.XHR_STATUS,{detail:{url:e,status:o.status}});t.dispatchEvent(s),o.onload=(n=>{if(200===o.status){s=new CustomEvent(Event.XHR_STATUS,{detail:{url:e,status:o.status}}),t.dispatchEvent(s);const a=document.createElement("div");a.innerHTML=n.target.response;const l=Array.from(a.querySelectorAll("script")).map(e=>e.attributes.getNamedItem("src").nodeValue);a.querySelectorAll("script").forEach(e=>e.remove(e)),window.scrollTo(0,0),t.innerHTML="",t.appendChild(a),(()=>{const e=document.querySelectorAll(Selector.VIEW_SCRIPT);e.length&&e.forEach(e=>{e.remove()})})(),l.length&&r(l),window.location.hash=e}else window.location.href=a.errorPage}),o.send()}_setUpUrl(e){e=e.replace(/^\//,"").split("?")[0],Array.from(document.querySelectorAll(Selector.NAV_LINK)).forEach(e=>{e.classList.remove(ClassName.ACTIVE)}),Array.from(document.querySelectorAll(Selector.NAV_LINK)).forEach(e=>{e.classList.remove(ClassName.ACTIVE)}),Array.from(document.querySelectorAll(Selector.NAV_DROPDOWN)).forEach(e=>{e.classList.remove(ClassName.SHOW)}),Array.from(document.querySelectorAll(Selector.NAV_DROPDOWN)).forEach(t=>{Array.from(t.querySelectorAll(`a[href*="${e}"]`)).length>0&&t.classList.add(ClassName.SHOW)}),Array.from(document.querySelectorAll(`${Selector.NAV_ITEM} a[href*="${e}"]`)).forEach(e=>{e.classList.add(ClassName.ACTIVE)}),this._loadPage(e)}_loadBlank(e){window.open(e)}_loadTop(e){window.location=e}_update(e){"#"!==e.href&&(void 0!==e.dataset.toggle&&"null"!==e.dataset.toggle||("_top"===e.target?this._loadTop(e.href):"_blank"===e.target?this._loadBlank(e.href):this._setUpUrl(e.getAttribute("href"))))}_addEventListeners(){EventHandler.on(document,Event.CLICK_DATA_API,Selector.NAV_LINK,e=>{e.preventDefault();let t=e.target;t.classList.contains(ClassName.NAV_LINK)||(t=t.closest(Selector.NAV_LINK)),t.classList.contains(ClassName.NAV_DROPDOWN_TOGGLE)||"#"===t.getAttribute("href")||this._update(t)})}static _asyncLoadInterface(e,t){let a=Data.getData(e,DATA_KEY);if(a||(a=new AsyncLoad(e,"object"==typeof t&&t)),"string"==typeof t){if(void 0===a[t])throw new TypeError(`No method named "${t}"`);a[t]()}}static jQueryInterface(e){return this.each(function(){AsyncLoad._asyncLoadInterface(this,e)})}}const $=getjQuery();if($){const e=$.fn[NAME];$.fn[NAME]=AsyncLoad.jQueryInterface,$.fn[NAME].Constructor=AsyncLoad,$.fn[NAME].noConflict=(()=>($.fn[NAME]=e,AsyncLoad.jQueryInterface))}export default AsyncLoad;
//# sourceMappingURL=/sm/c75eb574848a4b8aa22f7ebdacb0ad70b38bb27fbddfc379238087525bb8b3c6.map