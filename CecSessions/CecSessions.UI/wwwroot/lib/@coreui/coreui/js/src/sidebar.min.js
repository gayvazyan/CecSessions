/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/@coreui/coreui@3.0.0/js/src/sidebar.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{getjQuery,reflow,TRANSITION_END,typeCheckConfig}from"./util/index";import Data from"./dom/data";import EventHandler from"./dom/event-handler";import Manipulator from"./dom/manipulator";import PerfectScrollbar from"perfect-scrollbar";const NAME="sidebar",VERSION="3.0.0",DATA_KEY="coreui.sidebar",EVENT_KEY=`.${DATA_KEY}`,DATA_API_KEY=".data-api",Default={breakpoints:{xs:"c-sidebar-show",sm:"c-sidebar-sm-show",md:"c-sidebar-md-show",lg:"c-sidebar-lg-show",xl:"c-sidebar-xl-show"},dropdownAccordion:!0},DefaultType={breakpoints:"object",dropdownAccordion:"(string|boolean)"},ClassName={ACTIVE:"c-active",BACKDROP:"c-sidebar-backdrop",FADE:"c-fade",NAV_DROPDOWN:"c-sidebar-nav-dropdown",NAV_DROPDOWN_TOGGLE:"c-sidebar-nav-dropdown-toggle",SHOW:"c-show",SIDEBAR_MINIMIZED:"c-sidebar-minimized",SIDEBAR_OVERLAID:"c-sidebar-overlaid",SIDEBAR_SHOW:"c-sidebar-show",SIDEBAR_UNFOLDABLE:"c-sidebar-unfoldable"},Event={CLASS_TOGGLE:"classtoggle",CLICK_DATA_API:`click${EVENT_KEY}.data-api`,CLOSE:`close${EVENT_KEY}`,CLOSED:`closed${EVENT_KEY}`,LOAD_DATA_API:`load${EVENT_KEY}.data-api`,OPEN:`open${EVENT_KEY}`,OPENED:`opened${EVENT_KEY}`},Selector={NAV_DROPDOWN_TOGGLE:".c-sidebar-nav-dropdown-toggle",NAV_DROPDOWN:".c-sidebar-nav-dropdown",NAV_LINK:".c-sidebar-nav-link",NAVIGATION_CONTAINER:".c-sidebar-nav",NAVIGATION_DROPDOWN_ITEMS:".c-sidebar-nav-dropdown-items",SIDEBAR:".c-sidebar"};class Sidebar{constructor(e,t){if(void 0===PerfectScrollbar)throw new TypeError("CoreUI's sidebar require Perfect Scrollbar");this._element=e,this._config=this._getConfig(t),this._open=this._isVisible(),this._mobile=this._isMobile(),this._overlaid=this._isOverlaid(),this._minimize=this._isMinimized(),this._unfoldable=this._isUnfoldable(),this._setActiveLink(),this._ps=null,this._backdrop=null,this._psInit(),this._addEventListeners(),Data.setData(e,DATA_KEY,this)}static get VERSION(){return VERSION}static get Default(){return Default}static get DefaultType(){return DefaultType}open(e){EventHandler.trigger(this._element,Event.OPEN),this._isMobile()?(this._addClassName(this._firstBreakpointClassName()),this._showBackdrop(),EventHandler.one(this._element,TRANSITION_END,()=>{this._addClickOutListener()})):e?this._addClassName(this._getBreakpointClassName(e)):this._addClassName(this._firstBreakpointClassName());EventHandler.one(this._element,TRANSITION_END,()=>{!0===this._isVisible()&&(this._open=!0,EventHandler.trigger(this._element,Event.OPENED))})}close(e){EventHandler.trigger(this._element,Event.CLOSE),this._isMobile()?(this._element.classList.remove(this._firstBreakpointClassName()),this._removeBackdrop(),this._removeClickOutListener()):e?this._element.classList.remove(this._getBreakpointClassName(e)):this._element.classList.remove(this._firstBreakpointClassName());EventHandler.one(this._element,TRANSITION_END,()=>{!1===this._isVisible()&&(this._open=!1,EventHandler.trigger(this._element,Event.CLOSED))})}toggle(e){this._open?this.close(e):this.open(e)}minimize(){this._isMobile()||(this._addClassName(ClassName.SIDEBAR_MINIMIZED),this._minimize=!0,this._psDestroy())}unfoldable(){this._isMobile()||(this._addClassName(ClassName.SIDEBAR_UNFOLDABLE),this._unfoldable=!0)}reset(){this._element.classList.contains(ClassName.SIDEBAR_MINIMIZED)&&(this._element.classList.remove(ClassName.SIDEBAR_MINIMIZED),this._minimize=!1,EventHandler.one(this._element,TRANSITION_END,this._psInit())),this._element.classList.contains(ClassName.SIDEBAR_UNFOLDABLE)&&(this._element.classList.remove(ClassName.SIDEBAR_UNFOLDABLE),this._unfoldable=!1)}_getConfig(e){return e={...this.constructor.Default,...Manipulator.getDataAttributes(this._element),...e},typeCheckConfig(NAME,e,this.constructor.DefaultType),e}_isMobile(){return Boolean(window.getComputedStyle(this._element,null).getPropertyValue("--is-mobile"))}_isMinimized(){return this._element.classList.contains(ClassName.SIDEBAR_MINIMIZED)}_isOverlaid(){return this._element.classList.contains(ClassName.SIDEBAR_OVERLAID)}_isUnfoldable(){return this._element.classList.contains(ClassName.SIDEBAR_UNFOLDABLE)}_isVisible(){const e=this._element.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}_addClassName(e){this._element.classList.add(e)}_firstBreakpointClassName(){return Object.keys(Default.breakpoints).map(e=>Default.breakpoints[e])[0]}_getBreakpointClassName(e){return Default.breakpoints[e]}_removeBackdrop(){this._backdrop&&(this._backdrop.parentNode.removeChild(this._backdrop),this._backdrop=null)}_showBackdrop(){this._backdrop||(this._backdrop=document.createElement("div"),this._backdrop.className=ClassName.BACKDROP,this._backdrop.classList.add(ClassName.FADE),document.body.appendChild(this._backdrop),reflow(this._backdrop),this._backdrop.classList.add(ClassName.SHOW))}_clickOutListener(e,t){null===e.target.closest(Selector.SIDEBAR)&&(e.preventDefault(),e.stopPropagation(),t.close())}_addClickOutListener(){EventHandler.on(document,Event.CLICK_DATA_API,e=>{this._clickOutListener(e,this)})}_removeClickOutListener(){EventHandler.off(document,Event.CLICK_DATA_API)}_getAllSiblings(e,t){const s=[];e=e.parentNode.firstChild;do{3!==e.nodeType&&(t&&!t(e)||s.push(e))}while(e=e.nextSibling);return s}_toggleDropdown(e,t){let s=e.target;s.classList.contains(ClassName.NAV_DROPDOWN_TOGGLE)||(s=s.closest(Selector.NAV_DROPDOWN_TOGGLE));const i=s.closest(Selector.NAVIGATION_CONTAINER).dataset;void 0!==i.dropdownAccordion&&(Default.dropdownAccordion=JSON.parse(i.dropdownAccordion)),!0===Default.dropdownAccordion&&this._getAllSiblings(s.parentElement).forEach(e=>{e!==s.parentNode&&e.classList.contains(ClassName.NAV_DROPDOWN)&&e.classList.remove(ClassName.SHOW)}),s.parentNode.classList.toggle(ClassName.SHOW),t._psUpdate()}_psInit(){this._element.querySelector(Selector.NAVIGATION_CONTAINER)&&(this._ps=new PerfectScrollbar(this._element.querySelector(Selector.NAVIGATION_CONTAINER),{suppressScrollX:!0}))}_psUpdate(){this._ps&&this._ps.update()}_psDestroy(){this._ps&&(this._ps.destroy(),this._ps=null)}_getParents(e,t){const s=[];for(;e&&e!==document;e=e.parentNode)t?e.matches(t)&&s.push(e):s.push(e);return s}_setActiveLink(){Array.from(this._element.querySelectorAll(Selector.NAV_LINK)).forEach(e=>{let t;"#"===(t=/\\?.*=/.test(String(window.location))||/\\?./.test(String(window.location))?String(window.location).split("?")[0]:/#./.test(String(window.location))?String(window.location).split("#")[0]:String(window.location)).slice(-1)&&(t=t.slice(0,-1)),e.href===t&&(e.classList.add(ClassName.ACTIVE),Array.from(this._getParents(e,Selector.NAV_DROPDOWN)).forEach(e=>{e.classList.add(ClassName.SHOW)}))})}_addEventListeners(){this._mobile&&this._open&&this._addClickOutListener(),this._overlaid&&this._open&&this._addClickOutListener(),EventHandler.on(this._element,Event.CLASS_TOGGLE,e=>{if(e.detail.className===ClassName.SIDEBAR_MINIMIZED&&(this._element.classList.contains(ClassName.SIDEBAR_MINIMIZED)?this.minimize():this.reset()),e.detail.className===ClassName.SIDEBAR_UNFOLDABLE&&(this._element.classList.contains(ClassName.SIDEBAR_UNFOLDABLE)?this.unfoldable():this.reset()),void 0!==Object.keys(Default.breakpoints).find(t=>Default.breakpoints[t]===e.detail.className)){const{className:t}=e.detail,s=Object.keys(Default.breakpoints).find(e=>Default.breakpoints[e]===t);e.detail.add?this.open(s):this.close(s)}}),EventHandler.on(this._element,Event.CLICK_DATA_API,Selector.NAV_DROPDOWN_TOGGLE,e=>{e.preventDefault(),this._toggleDropdown(e,this)}),EventHandler.on(this._element,Event.CLICK_DATA_API,Selector.NAV_LINK,()=>{this._isMobile()&&this.close()})}static _sidebarInterface(e,t){let s=Data.getData(e,DATA_KEY);if(s||(s=new Sidebar(e,"object"==typeof t&&t)),"string"==typeof t){if(void 0===s[t])throw new TypeError(`No method named "${t}"`);s[t]()}}static jQueryInterface(e){return this.each(function(){Sidebar._sidebarInterface(this,e)})}static getInstance(e){return Data.getData(e,DATA_KEY)}}EventHandler.on(window,Event.LOAD_DATA_API,()=>{Array.from(document.querySelectorAll(Selector.SIDEBAR)).forEach(e=>{Sidebar._sidebarInterface(e)})});const $=getjQuery();if($){const e=$.fn[NAME];$.fn[NAME]=Sidebar.jQueryInterface,$.fn[NAME].Constructor=Sidebar,$.fn[NAME].noConflict=(()=>($.fn[NAME]=e,Sidebar.jQueryInterface))}export default Sidebar;
//# sourceMappingURL=/sm/e1062d07fb415272d53e36da9cca70c306defe0a41afad1bc87f8bb0e08c2b78.map