/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/@coreui/coreui@3.0.0/js/src/tooltip.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{getjQuery,TRANSITION_END,emulateTransitionEnd,findShadowRoot,getTransitionDurationFromElement,getUID,isElement,makeArray,noop,typeCheckConfig}from"./util/index";import{DefaultWhitelist,sanitizeHtml}from"./util/sanitizer";import Data from"./dom/data";import EventHandler from"./dom/event-handler";import Manipulator from"./dom/manipulator";import{createPopper}from"@popperjs/core";import SelectorEngine from"./dom/selector-engine";const NAME="tooltip",VERSION="3.0.0",DATA_KEY="coreui.tooltip",EVENT_KEY=`.${DATA_KEY}`,CLASS_PREFIX="bs-tooltip",BSCLS_PREFIX_REGEX=new RegExp(`(^|\\s)${CLASS_PREFIX}\\S+`,"g"),DISALLOWED_ATTRIBUTES=["sanitize","whiteList","sanitizeFn"],DefaultType={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},AttachmentMap={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},Default={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:["top","right","bottom","left"],boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:DefaultWhitelist,popperConfig:null},HoverState={SHOW:"show",OUT:"out"},Event={HIDE:`hide${EVENT_KEY}`,HIDDEN:`hidden${EVENT_KEY}`,SHOW:`show${EVENT_KEY}`,SHOWN:`shown${EVENT_KEY}`,INSERTED:`inserted${EVENT_KEY}`,CLICK:`click${EVENT_KEY}`,FOCUSIN:`focusin${EVENT_KEY}`,FOCUSOUT:`focusout${EVENT_KEY}`,MOUSEENTER:`mouseenter${EVENT_KEY}`,MOUSELEAVE:`mouseleave${EVENT_KEY}`},ClassName={FADE:"fade",SHOW:"show"},Selector={TOOLTIP_INNER:".tooltip-inner"},Trigger={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"};class Tooltip{constructor(t,e){if(void 0===createPopper)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners(),Data.setData(t,this.constructor.DATA_KEY,this)}static get VERSION(){return VERSION}static get Default(){return Default}static get NAME(){return NAME}static get DATA_KEY(){return DATA_KEY}static get Event(){return Event}static get EVENT_KEY(){return EVENT_KEY}static get DefaultType(){return DefaultType}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(t){if(this._isEnabled)if(t){const e=this.constructor.DATA_KEY;let i=Data.getData(t.delegateTarget,e);i||(i=new this.constructor(t.delegateTarget,this._getDelegateConfig()),Data.setData(t.delegateTarget,e,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(this.getTipElement().classList.contains(ClassName.SHOW))return void this._leave(null,this);this._enter(null,this)}}dispose(){clearTimeout(this._timeout),Data.removeData(this.element,this.constructor.DATA_KEY),EventHandler.off(this.element,this.constructor.EVENT_KEY),EventHandler.off(SelectorEngine.closest(this.element,".modal"),"hide.bs.modal",this._hideModalHandler),this.tip&&this.tip.parentNode.removeChild(this.tip),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null}show(){if("none"===this.element.style.display)throw new Error("Please use show on visible elements");if(this.isWithContent()&&this._isEnabled){const t=EventHandler.trigger(this.element,this.constructor.Event.SHOW),e=findShadowRoot(this.element),i=null===e?this.element.ownerDocument.documentElement.contains(this.element):e.contains(this.element);if(t.defaultPrevented||!i)return;const n=this.getTipElement(),o=getUID(this.constructor.NAME);n.setAttribute("id",o),this.element.setAttribute("aria-describedby",o),this.setContent(),this.config.animation&&n.classList.add(ClassName.FADE);const s="function"==typeof this.config.placement?this.config.placement.call(this,n,this.element):this.config.placement,r=this._getAttachment(s);this._addAttachmentClass(r);const a=this._getContainer();Data.setData(n,this.constructor.DATA_KEY,this),this.element.ownerDocument.documentElement.contains(this.tip)||a.appendChild(n),EventHandler.trigger(this.element,this.constructor.Event.INSERTED),this._popper=createPopper(this.element,n,this._getPopperConfig(r)),n.classList.add(ClassName.SHOW),"ontouchstart"in document.documentElement&&makeArray(document.body.children).forEach(t=>{EventHandler.on(t,"mouseover",noop())});const l=()=>{this.config.animation&&this._fixTransition();const t=this._hoverState;this._hoverState=null,EventHandler.trigger(this.element,this.constructor.Event.SHOWN),t===HoverState.OUT&&this._leave(null,this)};if(this.tip.classList.contains(ClassName.FADE)){const t=getTransitionDurationFromElement(this.tip);EventHandler.one(this.tip,TRANSITION_END,l),emulateTransitionEnd(this.tip,t)}else l()}}hide(){const t=this.getTipElement(),e=()=>{this._hoverState!==HoverState.SHOW&&t.parentNode&&t.parentNode.removeChild(t),this._cleanTipClass(),this.element.removeAttribute("aria-describedby"),EventHandler.trigger(this.element,this.constructor.Event.HIDDEN),this._popper.destroy()};if(!EventHandler.trigger(this.element,this.constructor.Event.HIDE).defaultPrevented){if(t.classList.remove(ClassName.SHOW),"ontouchstart"in document.documentElement&&makeArray(document.body.children).forEach(t=>EventHandler.off(t,"mouseover",noop)),this._activeTrigger[Trigger.CLICK]=!1,this._activeTrigger[Trigger.FOCUS]=!1,this._activeTrigger[Trigger.HOVER]=!1,this.tip.classList.contains(ClassName.FADE)){const i=getTransitionDurationFromElement(t);EventHandler.one(t,TRANSITION_END,e),emulateTransitionEnd(t,i)}else e();this._hoverState=""}}update(){null!==this._popper&&this._popper.scheduleUpdate()}isWithContent(){return Boolean(this.getTitle())}getTipElement(){if(this.tip)return this.tip;const t=document.createElement("div");return t.innerHTML=this.config.template,this.tip=t.children[0],this.tip}setContent(){const t=this.getTipElement();this.setElementContent(SelectorEngine.findOne(Selector.TOOLTIP_INNER,t),this.getTitle()),t.classList.remove(ClassName.FADE),t.classList.remove(ClassName.SHOW)}setElementContent(t,e){if(null!==t)return"object"==typeof e&&isElement(e)?(e.jquery&&(e=e[0]),void(this.config.html?e.parentNode!==t&&(t.innerHTML="",t.appendChild(e)):t.innerText=e.textContent)):void(this.config.html?(this.config.sanitize&&(e=sanitizeHtml(e,this.config.whiteList,this.config.sanitizeFn)),t.innerHTML=e):t.innerText=e)}getTitle(){let t=this.element.getAttribute("data-original-title");return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t}_getPopperConfig(t){return{...{placement:t,modifiers:[{name:"offset",options:{offset:this._getOffset()}},{name:"flip",options:{fallbackPlacements:this.config.fallbackPlacement}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preventOverflow",options:{boundary:this.config.boundary}}],onCreate:t=>{t.originalPlacement!==t.placement&&this._handlePopperPlacementChange(t)},onUpdate:t=>this._handlePopperPlacementChange(t)},...this.config.popperConfig}}_addAttachmentClass(t){this.getTipElement().classList.add(`${CLASS_PREFIX}-${t}`)}_getOffset(){const t={};return"function"==typeof this.config.offset?t.fn=(t=>(t.offsets={...t.offsets,...this.config.offset(t.offsets,this.element)||{}},t)):t.offset=this.config.offset,t}_getContainer(){return!1===this.config.container?document.body:isElement(this.config.container)?this.config.container:SelectorEngine.findOne(this.config.container)}_getAttachment(t){return AttachmentMap[t.toUpperCase()]}_setListeners(){this.config.trigger.split(" ").forEach(t=>{if("click"===t)EventHandler.on(this.element,this.constructor.Event.CLICK,this.config.selector,t=>this.toggle(t));else if(t!==Trigger.MANUAL){const e=t===Trigger.HOVER?this.constructor.Event.MOUSEENTER:this.constructor.Event.FOCUSIN,i=t===Trigger.HOVER?this.constructor.Event.MOUSELEAVE:this.constructor.Event.FOCUSOUT;EventHandler.on(this.element,e,this.config.selector,t=>this._enter(t)),EventHandler.on(this.element,i,this.config.selector,t=>this._leave(t))}}),this._hideModalHandler=(()=>{this.element&&this.hide()}),EventHandler.on(SelectorEngine.closest(this.element,".modal"),"hide.bs.modal",this._hideModalHandler),this.config.selector?this.config={...this.config,trigger:"manual",selector:""}:this._fixTitle()}_fixTitle(){const t=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))}_enter(t,e){const i=this.constructor.DATA_KEY;(e=e||Data.getData(t.delegateTarget,i))||(e=new this.constructor(t.delegateTarget,this._getDelegateConfig()),Data.setData(t.delegateTarget,i,e)),t&&(e._activeTrigger["focusin"===t.type?Trigger.FOCUS:Trigger.HOVER]=!0),e.getTipElement().classList.contains(ClassName.SHOW)||e._hoverState===HoverState.SHOW?e._hoverState=HoverState.SHOW:(clearTimeout(e._timeout),e._hoverState=HoverState.SHOW,e.config.delay&&e.config.delay.show?e._timeout=setTimeout(()=>{e._hoverState===HoverState.SHOW&&e.show()},e.config.delay.show):e.show())}_leave(t,e){const i=this.constructor.DATA_KEY;(e=e||Data.getData(t.delegateTarget,i))||(e=new this.constructor(t.delegateTarget,this._getDelegateConfig()),Data.setData(t.delegateTarget,i,e)),t&&(e._activeTrigger["focusout"===t.type?Trigger.FOCUS:Trigger.HOVER]=!1),e._isWithActiveTrigger()||(clearTimeout(e._timeout),e._hoverState=HoverState.OUT,e.config.delay&&e.config.delay.hide?e._timeout=setTimeout(()=>{e._hoverState===HoverState.OUT&&e.hide()},e.config.delay.hide):e.hide())}_isWithActiveTrigger(){for(const t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1}_getConfig(t){const e=Manipulator.getDataAttributes(this.element);return Object.keys(e).forEach(t=>{-1!==DISALLOWED_ATTRIBUTES.indexOf(t)&&delete e[t]}),t&&"object"==typeof t.container&&t.container.jquery&&(t.container=t.container[0]),"number"==typeof(t={...this.constructor.Default,...e,..."object"==typeof t&&t?t:{}}).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),typeCheckConfig(NAME,t,this.constructor.DefaultType),t.sanitize&&(t.template=sanitizeHtml(t.template,t.whiteList,t.sanitizeFn)),t}_getDelegateConfig(){const t={};if(this.config)for(const e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t}_cleanTipClass(){const t=this.getTipElement(),e=t.getAttribute("class").match(BSCLS_PREFIX_REGEX);null!==e&&e.length&&e.map(t=>t.trim()).forEach(e=>t.classList.remove(e))}_handlePopperPlacementChange(t){const e=t.instance;this.tip=e.popper,this._cleanTipClass(),this._addAttachmentClass(this._getAttachment(t.placement))}_fixTransition(){const t=this.getTipElement(),e=this.config.animation;null===t.getAttribute("x-placement")&&(t.classList.remove(ClassName.FADE),this.config.animation=!1,this.hide(),this.show(),this.config.animation=e)}static jQueryInterface(t){return this.each(function(){let e=Data.getData(this,DATA_KEY);const i="object"==typeof t&&t;if((e||!/dispose|hide/.test(t))&&(e||(e=new Tooltip(this,i)),"string"==typeof t)){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}})}static getInstance(t){return Data.getData(t,DATA_KEY)}}const $=getjQuery();if($){const t=$.fn[NAME];$.fn[NAME]=Tooltip.jQueryInterface,$.fn[NAME].Constructor=Tooltip,$.fn[NAME].noConflict=(()=>($.fn[NAME]=t,Tooltip.jQueryInterface))}export default Tooltip;
//# sourceMappingURL=/sm/e79ee9e5593aaf15a4ef4bcd66e6b6e667d253da758d41c94a170285a06e8876.map